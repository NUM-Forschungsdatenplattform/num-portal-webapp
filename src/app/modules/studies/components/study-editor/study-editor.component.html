<section role="region" fxLayout="column" fxFlex="100%">
  <h2>{{ 'NAVIGATION.CONFIGURE_STUDY' | translate }}</h2>
  <p class="num-margin-b-40">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut pretium pretium tempor. Ut eget
    imperdiet neque. In volutpat ante semper diam molestie, et aliquam.
  </p>

  <mat-accordion [multi]="true" fxFlex="100%">
    <num-study-editor-general-info
      [form]="studyForm"
      [isDisabled]="isGeneralInfoDisabled"
      [generalInfoData]="generalInfoData"
      data-test="study-editor__general-info"
    ></num-study-editor-general-info>

    <num-study-editor-templates
      [(templates)]="study.templates"
      [isDisabled]="isTemplatesDisabled"
      data-test="study-editor__templates"
    ></num-study-editor-templates>

    <num-study-editor-connector
      [cohortNode]="cohortGroup"
      [isLoadingComplete]="isCohortsFetched"
      [isDisabled]="isConnectorDisabled"
      [determineHitsContent]="determineHitsContent"
      (determineHitsClicked)="determineHits()"
      data-test="study-editor__connector__group"
    ></num-study-editor-connector>

    <num-study-editor-researchers
      [isLoadingComplete]="isResearchersFetched"
      [(researchers)]="study.researchers"
      [isDisabled]="isResearchersDisabled"
      data-test="study-editor__researchers"
    ></num-study-editor-researchers>
  </mat-accordion>

  <num-study-editor-comments
    *ngIf="study.id !== null && study.id !== undefined"
    [isLoadingComplete]="isCommentsFetched"
    [comments]="studyComments"
    [form]="commentForm"
    (postComment)="postComment()"
    data-test="study-editor__comments"
  ></num-study-editor-comments>

  <num-study-editor-approval
    *ngIf="mode === possibleModes.REVIEW"
    [form]="approverForm"
    data-test="study-editor__approval"
  ></num-study-editor-approval>

  <num-study-editor-buttons
    [editorMode]="mode"
    [studyStatus]="study.status"
    [isFormValid]="studyForm.valid"
    [approverForm]="approverForm"
    [isResearchersDefined]="study.researchers.length"
    [isTemplatesDefined]="study.templates.length"
    [isCohortDefined]="study.cohortGroup.children.length"
    (saveAll)="save()"
    (saveResearchers)="saveResearchers()"
    (saveAsApprovalRequest)="sendForApproval()"
    (saveAsApprovalReply)="saveAsApprovalReply()"
    (startEdit)="startEdit()"
    (cancel)="cancel()"
    data-test="study-editor__buttons"
  ></num-study-editor-buttons>
</section>
