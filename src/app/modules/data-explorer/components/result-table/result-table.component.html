<section role="region" fxLayout="column">
  <h3 id="result-set-header">{{ 'DATA_EXPLORER.RESULT_SET' | translate }}</h3>
  <span class="num-margin-b-20"
    >{{ 'DATA_EXPLORER.CONFIGURATION' | translate }}:
    {{ 'DATA_EXPLORER.' + configuration | translate }}</span
  >

  <div *ngIf="!isDataSetLoading; else loading">
    <div *ngIf="!resultSet">
      <mat-card class="mat-elevation-z1">
        <div fxLayout="row" fxLayoutAlign="center center">
          <span>{{ 'DATA_EXPLORER.NO_RESULTS_YET' | translate }}</span>
          {{ resultSet }}
        </div>
      </mat-card>
    </div>
    <div *ngIf="resultSet && !resultSet.rows.length">
      <mat-card class="mat-elevation-z1">
        <div fxLayout="row" fxLayoutAlign="center center">
          <span>{{ 'DATA_EXPLORER.EMPTY_RESULT_SET' | translate }}</span>
        </div>
      </mat-card>
    </div>
    <div *ngIf="resultSet && resultSet.rows.length">
      <div class="table-responsive">
        <table aria-labelledby="result-set-header" mat-table [dataSource]="dataSource" matSort>
          <ng-container
            *ngFor="let column of displayedColumns; let i = index"
            [matColumnDef]="column"
          >
            <th
              scope="col"
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              [matTooltip]="column"
              matTooltipPosition="above"
            >
              {{ resultSetColumns[i].name }}
            </th>
            <td mat-cell *matCellDef="let element">
              <pre>{{ element[i] | json }}</pre>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>
    </div>
  </div>

  <ng-template #loading>
    <mat-card class="mat-elevation-z1">
      <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="8px">
        <mat-spinner color="accent" [diameter]="24"></mat-spinner>
        <span>{{ 'DATA_EXPLORER.LOADING_RESULT_SET' | translate }}</span>
      </div>
    </mat-card>
  </ng-template>
</section>
